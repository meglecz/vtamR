# Ideas for vtamR


## Generally, better gestion of the wd
	setwd pour test ne change par de repertoir en test_Merge 
	Check slash at the end of dir names in all cases. Check is missing in MakeKnownOccurrences
	
## Protect against failure in system calls:
	status <- system(cmd)
	if (status != 0) {
	  stop("vsearch failed. Check if the command and paths are correct.")
	}
	learn more about system and system2
	

## clustering
	Add cluster vsearch Ã  la fin into tuto
	Clustering by fixes threshold => DONE Cluster_size function
	
## Remote BLAST in mkLTG
	filter out incorrect names on the fly

## check input df or csv in every function and same for output

	Merge return csv ou df
	asv_list : it is a filename. Maybe it could be also a data frame.
	Mock_composition : it is a filename. Maybe it could be also a data frame.
	
## Joining with `by = join_by(asv, sample, replicate, read_count)`Joining with `by = join_by(asv, sample, replicate, read_count)`[1] "PoolFilters: PASS"
Avois warning when running test_filters


## SortRedas pas de Read count in output, check why

## Taxassing avant LFN faire uniqument pour mock (tuto)

## PCR error => dire que c'est la demo (tuto)

## Check obligatory heading in doc for known_occurrences (tuto)

## Check the use of asv_id in taxassign. If not asv_id, error message (this is corrected 2025/06/17). Make sure that the asv_id and asv are kept coherently

## make useable examples

## make a package

## integrate MakeKnownOccurrences to OptimizeLFNreadCountLFNvariant ?? Rais warning if FN. , add opton to use custol knownoccurrences files
=> modify vignette accordingly

## chek Taxassign if asv_id column is really necessary in input, and adapt doc.




# DONE 

## 2025/05/06
- Add sep to params in FilterIndel, FilterCodonStop
- Add Cluster_size function and its internal functions to cluster ASVs to mOTU with fixed limit
- Allow df or CSV for mock_composition in WriteASVtable
- Complete lineage of Taxassign if missing taxlevels above resolution => Done, argument fill_lineage is added

## 2025/06/17

- Print message for CheckFileinfo => DONE; 
	- quiet option is added (default FALSE)
	- if quiet == TRUE, there are no 'OK' messages (just to say that a test is done and everythin is OK). It is to use when cjhecking file info from within another function.
	- if quiet == FALSE, there are 'OK' messages. It is usefull when run directly by the users.

## 2025/06/19

- Better gestion of path
	- Use file.path() instead of paste() for file paths
	- check_dir => creates dir, but do not add /
	- use tempdir() to get temp_dir names => if multiple runs of the same commans, make new subdir for each run and delete it afterwards
		Fonctions modified:
		-SortReads
		-SortReads_no_reverse
		-run_swarm
		-PoolDatasets
		-flagPCRerror_vsearch
		-flagChimera
		-TaxAssign
		-OptimizePCRerror
		-Cluster_size
		
## 2025/06/24 tested on windows

- check_path (experimental in Installation_vtamR.Rmd)
- use path+executable names for binaries

## 2025/06/24

- add citation, 
- complete DESCRIPTION
- run and correct small bugs with devtools::check() and results <- rcmdcheck::rcmdcheck()
- \donttest{} examples

## 2025/06/24 check()

- add citation
- use devtools::check() and correct formatting
- make conda env with thirs party programs

## 2025/06/25 install()

- check on windows
- make readme, doc, vignette structure
- correcte license, DESCRIPTION

## 2025/06/27 vignette install()

- develop vignettes, but EVAL=FALSE => see if it can be built if COInr is installed locally. Alternativelly, use df with taxassign results
DONE, test database is used for taxassing

## 2025/07/03 demo files

- tutorial-vtamr-pipeline vignette adapted and uses only data comming from the package => Adjust graphic size in html and print stat df, which is too large
- adapt make-mock-composition-file using the test database => DONE

## 2025/07/07
Make a separate vignette, with different strategies of merge-Sortreads => Done

 
## Ignore

- Rename LFNvariant to FilterLFNvariant => NO. All LFN filters starts by LFN. Names are already very long, do not add anything on top.






